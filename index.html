<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Brincando com meu Nome</title>
  <link rel='stylesheet' href='themes/base/jquery.ui.all.css'>
  <script src='jquery-1.4.4.js'></script>
  <link rel='stylesheet' href='css/demos.css'>
  <link rel='stylesheet' href='css/brincando.css'>
</head>
<body>
  <div class='demo'>
    <h1>Monte o nome DAVI</h1>
    <div id='alfabeto' ondragenter='return preventDefault(event)' ondrop='return dragDropRemove(event)'
          ondragover='return preventDefault(event)'>
    </div>

    <div id='campos' style='clear:both;'>
    </div>
  </div>

  <script type='text/javascript'>
    $(document).ready(function(){
        putAlphabet();
        putDroppable();
        })

    function putAlphabet(){
      var alphabet = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U',
          'V', 'W', 'X', 'Y', 'Z']
      alphabet.forEach(function(alpha){
        var id = 'draggable_' + alpha;
        var src = 'alfabeto/Alfa' + alpha + '.jpg';
        var image = "<img id='" + id + "' src='" + src + "' height='65px' width='75px' draggable='true' ondragstart='return dragStart(event)'>"
        $('div#alfabeto').append(image);
          });
    }

    function putDroppable(){
      var qtty = 3;
      for (var i = 0; i <= qtty; i++){
        var div = "<div id='droppable_" + i + "' class='ui-widget-header droppable' ondragenter='return preventDefault(event)' ondrop='return dragDrop(event)' ondragover='return preventDefault(event)'> </div>"
        $('div#campos').append(div);
      }
    }

    function dragStart(ev){
      ev.dataTransfer.effectAllowed='copy';
      ev.dataTransfer.setData('Text', ev.target.id);
      return true;
    }

    function preventDefault(ev){
      ev.preventDefault();
      return true;
    }

    function dragDrop(ev){
      var data = ev.dataTransfer.getData('Text');
      var elemento = document.getElementById(data);
      ev.target.appendChild(elemento.cloneNode(true));
      elemento.removeAttribute('id');
      elemento.setAttribute('id', data + '_1');
      ev.preventDefault();
      validate();
      return false;
    }

    function dragDropRemove(ev){
      var data = ev.dataTransfer.getData('Text');
      ev.target.appendChild(document.getElementById(data));
      ev.target.removeChild(document.getElementById(data));
      ev.preventDefault();
      return false;
    }

    function validate(){
      var guessWord = "DAVI";
      var control = false;
      var guessed = '';
      for (var i = 0 ; i < guessWord.length; i++){
       var droppable = "droppable_" + i;
      var elemento = document.getElementById(droppable).childNodes[1];
      if (!elemento){
      }else {
        guessed += $(elemento).attr('id').slice(-1);
      }
     }
      if (guessed == guessWord) {
        $('div#campos').append("<p style=float:left; width:300px;>PARABENS!<BR /><BR />VOC&Ecirc; ACERTOU!</p><img src=imagens/fotos/4-DAVI.jpg width=350px height=270px style=float:right;/>");
      }
    }
  </script>
</body>
</html>
